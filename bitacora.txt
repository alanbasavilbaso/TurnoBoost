symfony server:start
symfony server:start


composer install   

php bin/console app:create-user

admin@turnoboost.com
admin123



---------------------------------------------------------------
php bin/console cache:clear && php bin/console asset-map:compile
---------------------------------------------------------------



php bin/console cache:clear
php bin/console asset-map:compile


Comparte tu link de reserva con tus clientes:
https://tuturno.io/test35


--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- 
correr worker en local:
        php bin/console messenger:consume async -vv
--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- 


# Secuencia completa de reset de BD
php bin/console doctrine:database:drop --force
php bin/console doctrine:database:create
rm -rf migrations/*
php bin/console make:migration
php bin/console doctrine:migrations:migrate



##  Generar la migraciÃ³n
Una vez que hayas creado las entidades, genera la migraciÃ³n:

    php bin/console make:migration

## Ejecutar la migraciÃ³n
Ejecuta la migraciÃ³n para aplicar los cambios a la base de datos:

    php bin/console doctrine:migrations:migrate



php bin/console doctrine:schema:drop --force
php bin/console doctrine:migrations:version --delete --all
php bin/console doctrine:migrations:migrate --no-interaction
php bin/console doctrine:schema:validate



## ðŸ—ï¸ Arquitectura General
### Symfony (Backend Principal)
- Maneja la lÃ³gica de negocio de citas
- Almacena notificaciones en la base de datos
- EnvÃ­a peticiones HTTP al microservicio de WhatsApp
- Gestiona el sistema de colas con Messenger


### Node.js + Baileys (Microservicio)
- Maneja la conexiÃ³n con WhatsApp
- Guarda y mantiene la sesiÃ³n de WhatsApp
- Expone API REST para recibir mensajes
- Procesa y envÃ­a mensajes a WhatsApp



---------------------------------------------
---------------------------------------------
---------------------------------------------
## ðŸ¤– Bot de WhatsApp - Funcionalidades Simples
---------------------------------------------
---------------------------------------------
---------------------------------------------
MENSAJES (que pueden cancelar en cualquier momento)
---------------------------------------------
## ðŸ“… Mensaje de ConfirmaciÃ³n de Turno
ðŸŽ‰ Â¡Tu turno ha sido confirmado!

ðŸ‘¤ Paciente: [Nombre del paciente]
ðŸ¥ Servicio: [Nombre del servicio]
ðŸ‘¨â€âš•ï¸ Profesional: Dr./Dra. [Nombre del profesional]
ðŸ“… Fecha: [DÃ­a de la semana], [DD/MM/YYYY]
ðŸ• Hora: [HH:MM]
ðŸ“ UbicaciÃ³n: [Nombre de la clÃ­nica/consultorio]
ðŸ“ DirecciÃ³n: [DirecciÃ³n completa]

ðŸ’¡ Â¿Necesitas modificar o cancelar tu turno? ðŸ‘† Haz clic aquÃ­: [LINK DE GESTIÃ“N]

âš ï¸ Importante: Llega 10 minutos antes de tu cita

---------------------------------------------
## â° Recordatorio 24 Horas Antes
ðŸ”” Recordatorio de tu turno

Â¡Hola [Nombre]! Te recordamos que maÃ±ana tienes tu cita:

ðŸ‘¨â€âš•ï¸ Con: Dr./Dra. [Nombre del profesional]
ðŸ¥ Servicio: [Nombre del servicio]
ðŸ“… MaÃ±ana [DD/MM] a las ðŸ• [HH:MM] ðŸ“ En: [Nombre de la clÃ­nica]

ðŸ“‹ Recomendaciones: â€¢ Llega 10 minutos antes
â€¢ Trae tu documento de identidad
â€¢ [PreparaciÃ³n especÃ­fica si aplica]

âŒ Â¿Necesitas cancelar? [LINK DE GESTIÃ“N]

---------------------------------------------
## âš¡ Recordatorio Urgente 2 Horas Antes
ðŸš¨ Â¡Tu turno es en 2 horas!

â° RECORDATORIO URGENTE

Hola [Nombre], tu cita es HOY a las [HH:MM]

ðŸ‘¨â€âš•ï¸ Dr./Dra. [Nombre del profesional]
ðŸ“ [Nombre de la clÃ­nica] ðŸ—ºï¸ DirecciÃ³n: [DirecciÃ³n]

ðŸƒâ€â™‚ï¸ Â¡No olvides salir con tiempo!

âš ï¸ Ãšltimo momento para cancelar: [LINK DE GESTIÃ“N]

---------------------------------------------
## âŒ ConfirmaciÃ³n de CancelaciÃ³n
âœ… Turno cancelado exitosamente

Hola [Nombre], tu turno ha sido cancelado:

ðŸ“… Fecha cancelada: [DD/MM/YYYY] a las [HH:MM]
ðŸ‘¨â€âš•ï¸ Con: Dr./Dra. [Nombre del profesional]

ðŸ“ž Â¿Quieres reagendar? LlÃ¡manos al [telÃ©fono] o visita [link del sistema]

ðŸ’™ Â¡Esperamos verte pronto!

---------------------------------------------
---------------------------------------------
---------------------------------------------
## ðŸ’° Mensajes con PolÃ­ticas de CancelaciÃ³n
---------------------------------------------
### ðŸ“… Mensaje de ConfirmaciÃ³n
ðŸŽ‰ Â¡Tu turno ha sido confirmado!

ðŸ‘¤ Cliente: [Nombre del cliente]
ðŸ¥ Servicio: [Nombre del servicio]
ðŸ‘¨â€âš•ï¸ Profesional: [Nombre del profesional]
ðŸ“… Fecha: [DÃ­a de la semana], [DD/MM/YYYY]
ðŸ• Hora: [HH:MM]
ðŸ“ UbicaciÃ³n: [Nombre de la clÃ­nica/consultorio]

ðŸ’¡ Â¿Necesitas modificar tu turno? ðŸ‘† Haz clic aquÃ­: [LINK DE GESTIÃ“N]

âš ï¸ POLÃTICA DE CANCELACIÃ“N
âœ… Gratuita: Antes de las 24 horas.
ðŸ’¸ Con Cargo: Dentro de las 24 horas.
---------------------------------------------
### â° Recordatorio 24 Horas (Con Advertencia)
ðŸ”” Recordatorio de tu turno

Â¡Hola [Nombre]! Te recordamos que maÃ±ana tienes tu cita:

ðŸ‘¨â€âš•ï¸ Con: Dr./Dra. [Nombre del profesional]
ðŸ“… MaÃ±ana [DD/MM] a las ðŸ• [HH:MM]

âš ï¸ Â¡ÃšLTIMO DÃA para cancelaciÃ³n GRATUITA! A partir de maÃ±ana, las cancelaciones tendrÃ¡n un cargo de $[MONTO]

âŒ Â¿Necesitas cancelar? [LINK DE GESTIÃ“N]
---------------------------------------------
### ðŸš¨ Recordatorio 2 Horas (CrÃ­tico)
ðŸš¨ Â¡Tu turno es en 2 horas!

Hola [Nombre], tu cita es HOY a las [HH:MM]

âš ï¸ ATENCIÃ“N: Ya no es posible cancelar este turno
En caso de no asistir, se cobrarÃ¡ el 100% del valor

ðŸƒâ€â™‚ï¸ Â¡Te esperamos!


---------------------------------------------
---------------------------------------------
---------------------------------------------

## ðŸ”— Sobre el Link de GestiÃ³n
La idea del link sin login es excelente . PodrÃ­as implementarlo asÃ­:

URL ejemplo: https://turnoboost.com/manage/[TOKEN_ÃšNICO]

El token podrÃ­a ser: hash(appointment_id + patient_phone + secret_key)

Funcionalidades del link:

- âœ… Ver detalles del turno
- ðŸ“… Reagendar (si hay disponibilidad)
- âŒ Cancelar turno
- ðŸ“ž Contactar a la clÃ­nica
- ðŸ—ºï¸ Ver ubicaciÃ³n en mapa
Ventajas:

- ðŸ”’ Seguro (token Ãºnico por turno)
- ðŸ“± FÃ¡cil acceso desde WhatsApp
- âš¡ Sin fricciÃ³n (no requiere registro)
- â° Token con expiraciÃ³n automÃ¡tica
Seguridad:

- Token expira despuÃ©s del turno
- Solo permite acciones del turno especÃ­fico
- Rate limiting para prevenir abuso
- Log de todas las acciones





    ->add('domain', TextType::class, [
        'label' => 'Dominio de Reservas',
        'help' => 'URL Ãºnica para que tus clientes reserven turnos online. Solo letras minÃºsculas, nÃºmeros y guiones. Ejemplo: www.turnoboost.com/mi-centro-belleza',
        'attr' => [
            'class' => 'form-control',
            'placeholder' => 'mi-centro-belleza',
            'pattern' => '[a-z0-9\\-]+',
            'title' => 'Solo letras minÃºsculas, nÃºmeros y guiones'
        ],
        'help_attr' => [
            'class' => 'form-text text-muted'
        ]
    ])