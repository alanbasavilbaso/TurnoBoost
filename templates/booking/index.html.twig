<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservar Turno - {{ clinic.name }}</title>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{{ asset('vendor/bootstrap/bootstrap.min.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{ asset('vendor/fontawesome/css/all.min.css') }}">
    
    <link href="{{ asset('styles/booking.css') }}" rel="stylesheet">
    
</head>
<body>
    <!-- Header de la Clínica -->
    <div class="clinic-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-2"><i class="fas fa-calendar-check me-2"></i>{{ clinic.name }}</h1>
                    <p class="mb-1"><i class="fas fa-map-marker-alt me-2"></i>{{ clinic.address }}</p>
                    <p class="mb-0"><i class="fas fa-phone me-2"></i>{{ clinic.phone }}</p>
                </div>
                <div class="col-md-4 text-end">
                    <h3 class="mb-0">Reservar Turno</h3>
                    <p class="mb-0">Selecciona tu servicio y horario</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container my-5">
        <div class="row">
            <!-- Columna Principal -->
            <div class="col-lg-8">
                <!-- Resumen de Selección -->
                <div class="summary-section mb-4">
                    <h4 class="mb-3"><i class="fas fa-clipboard-list me-2"></i>Tu Selección</h4>
                    
                    <!-- Servicio Seleccionado -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="selection-card p-3" id="selected-service-card" onclick="openServiceModal()">
                                <div id="service-content">
                                    <h6 class="text-muted mb-1">Servicio</h6>
                                    <p class="mb-0" id="selected-service-name">Seleccionar servicio</p>
                                    <small class="text-muted" id="selected-service-duration"></small>
                                </div>
                                <i class="fas fa-edit text-primary float-end"></i>
                            </div>
                        </div>
                        
                        <!-- Profesional Seleccionado -->
                        <div class="col-md-6">
                            <div class="selection-card p-3" id="selected-professional-card" onclick="openProfessionalModal()">
                                <div id="professional-content">
                                    <h6 class="text-muted mb-1">Profesional</h6>
                                    <p class="mb-0" id="selected-professional-name">Seleccionar profesional</p>
                                    <small class="text-muted" id="selected-professional-price"></small>
                                </div>
                                <i class="fas fa-edit text-primary float-end"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Selección de Fecha -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-calendar me-2"></i>Seleccionar Fecha</h5>
                    </div>
                    <div class="card-body">
                        <input type="date" class="form-control" id="selected-date" min="{{ 'now'|date('Y-m-d') }}">
                    </div>
                </div>

                <!-- Horarios Disponibles -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-clock me-2"></i>Horarios Disponibles</h5>
                    </div>
                    <div class="card-body">
                        <div id="timeslots-container">
                            <p class="text-muted text-center py-4">
                                <i class="fas fa-info-circle me-2"></i>
                                Selecciona un servicio, profesional y fecha para ver los horarios disponibles
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Información</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Dirección:</strong><br>{{ clinic.address }}</p>
                        <p><strong>Teléfono:</strong><br>{{ clinic.phone }}</p>
                        {% if clinic.email %}
                        <p><strong>Email:</strong><br>{{ clinic.email }}</p>
                        {% endif %}
                        
                        <hr>
                        
                        <div class="d-grid">
                            <button class="btn btn-success btn-lg" id="confirm-booking-btn" disabled>
                                <i class="fas fa-check me-2"></i>Confirmar Reserva
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Selección de Servicios -->
    <div class="modal fade" id="serviceModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-spa me-2"></i>Seleccionar Servicio</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="services-list">
                        <!-- Los servicios se cargarán aquí dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Selección de Profesionales -->
    <div class="modal fade" id="professionalModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-user-md me-2"></i>Seleccionar Profesional</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="professionals-list">
                        <!-- Los profesionales se cargarán aquí dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="{{ asset('vendor/bootstrap/bootstrap.bundle.min.js') }}"></script>

    <!-- Booking JavaScript -->
    <script src="{{ asset('scripts/booking.js') }}"></script>
    
    <!-- Pasar datos de la clínica al JavaScript -->
    <div data-clinic-domain="{{ clinic.domain }}" style="display: none;"></div>
</body>
</html>