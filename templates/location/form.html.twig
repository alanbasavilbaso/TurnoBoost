<form method="post" action="{{ path(is_edit ? 'location_edit' : 'location_new', is_edit ? {'id': location.id} : {}) }}">
    {{ form_start(form, {'render_rest': false}) }}
    
    {% if form.vars.errors|length > 0 %}
        <div class="alert alert-danger">
            <h6><i class="fas fa-exclamation-triangle"></i> Por favor corrige los siguientes errores:</h6>
            {{ form_errors(form) }}
        </div>
    {% endif %}

    <div class="mb-3">
        {{ form_label(form.name, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
        {{ form_widget(form.name, {'attr': {'class': 'form-control', 'id': 'location_name'}}) }}
        {{ form_errors(form.name) }}
    </div>

    <div class="mb-3">
        {{ form_label(form.domain, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
        {{ form_widget(form.domain, {'attr': {'class': 'form-control', 'id': 'location_domain'}}) }}
        {% if form.domain.vars.help %}
            <div class="form-text text-muted">
                <i class="fas fa-info-circle me-1"></i>
                {{ form.domain.vars.help }}
                {% if location.domain %}
                    <br><strong>URL actual:</strong> 
                    <a href="{{ url('booking_index_path', {'domain': location.domain}) }}" target="_blank" class="text-decoration-none">
                        {{ app.request.schemeAndHttpHost }}/{{ location.domain }}
                        <i class="fas fa-external-link-alt ms-1"></i>
                    </a>
                {% endif %}
            </div>
        {% endif %}
        {{ form_errors(form.domain) }}
    </div>

    <div class="mb-3">
        {{ form_label(form.address, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
        {{ form_widget(form.address, {'attr': {'class': 'form-control', 'rows': '3'}}) }}
        {{ form_errors(form.address) }}
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            {{ form_label(form.phone, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
            {{ form_widget(form.phone, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.phone) }}
        </div>
        <div class="col-md-6 mb-3">
            {{ form_label(form.email, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
            {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
            {{ form_errors(form.email) }}
        </div>
    </div>

    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button type="button" class="btn btn-secondary me-md-2" data-bs-dismiss="modal">
            <i class="fas fa-times"></i> Cancelar
        </button>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> {{ is_edit ? 'Actualizar' : 'Guardar' }} Ubicaci√≥n
        </button>
    </div>

    {{ form_rest(form) }}
    {{ form_end(form, {'render_rest': false}) }}
</form>